{% extends "base.html" %}

{% block title %}{{ config_data.page_titles.algorithm or "Algorithm - " + config_data.app_name }}{% endblock %}

{% block content %}
<!-- Algorithm Hero Section -->
<section class="relative bg-gradient-to-br from-blue-50 via-purple-50 to-green-50 py-20">
    <div class="absolute inset-0 overflow-hidden">
        <!-- Animated Background Elements -->
        <div class="absolute top-20 left-10 text-blue-200 opacity-30 animate-float">
            <i class="fas fa-brain text-4xl"></i>
        </div>
        <div class="absolute top-40 right-20 text-purple-200 opacity-30 animate-float-delayed">
            <i class="fas fa-cogs text-3xl"></i>
        </div>
        <div class="absolute bottom-20 left-20 text-green-200 opacity-30 animate-float">
            <i class="fas fa-network-wired text-3xl"></i>
        </div>
        <div class="absolute bottom-40 right-10 text-pink-200 opacity-30 animate-float-delayed">
            <i class="fas fa-microchip text-4xl"></i>
        </div>

        <!-- Animated Circles -->
        <div class="absolute top-10 right-1/4 w-32 h-32 bg-blue-100 rounded-full opacity-20 animate-pulse-slow"></div>
        <div class="absolute bottom-10 left-1/4 w-24 h-24 bg-purple-100 rounded-full opacity-20 animate-pulse-slow" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/2 right-10 w-16 h-16 bg-green-100 rounded-full opacity-20 animate-pulse-slow" style="animation-delay: 1s;"></div>
    </div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="animate-slide-up" style="animation-delay: 0.2s;">
            <h1 class="text-4xl md:text-6xl font-bold text-gray-900 mb-8 leading-tight">
                <span class="bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent">
                    {{ algorithm.title }}
                </span>
            </h1>
        </div>

        <div class="animate-slide-up" style="animation-delay: 0.4s;">
            <p class="text-xl md:text-2xl text-gray-600 mb-12 max-w-4xl mx-auto leading-relaxed">
                {{ algorithm.figure_caption }}
            </p>
        </div>

        <!-- Quick Navigation -->
        <div class="animate-slide-up" style="animation-delay: 0.6s;">
            <div class="flex flex-wrap justify-center gap-4 mb-12">
                <a href="#workflow" class="inline-flex items-center px-6 py-3 bg-white/80 backdrop-blur-sm hover:bg-white text-primary border-2 border-primary rounded-xl transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-project-diagram mr-2"></i>
                    Workflow
                </a>
                <a href="#methodology" class="inline-flex items-center px-6 py-3 bg-white/80 backdrop-blur-sm hover:bg-white text-secondary border-2 border-secondary rounded-xl transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-cogs mr-2"></i>
                    Methodology
                </a>
                <a href="#innovations" class="inline-flex items-center px-6 py-3 bg-white/80 backdrop-blur-sm hover:bg-white text-accent border-2 border-accent rounded-xl transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-lightbulb mr-2"></i>
                    Innovations
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Workflow Diagram Section -->
<section id="workflow" class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        <span class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full mb-6 mr-4">
          <i class="fas fa-project-diagram text-3xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"></i>
        </span>
        Algorithm Workflow
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed">
        Our multi-stage deep learning pipeline for ovarian cancer detection
      </p>
    </div>

    <!-- Workflow Image Container -->
    <div class="mb-12">
      <div class="bg-gradient-to-br from-gray-50 to-blue-50 rounded-3xl p-8 shadow-xl border border-gray-100">
        <div class="text-center">
          {% if algorithm.workflow_image %}
            {% set image_path = "/static/images/" + algorithm.workflow_image %}
            <img src="{{ image_path }}"
                 alt="{{ algorithm.title }} Workflow"
                 class="max-w-full h-auto mx-auto rounded-2xl shadow-lg border border-gray-200"
                 id="workflow-image"
                 onerror="this.parentElement.innerHTML='<div class=\'workflow-placeholder\'><i class=\'fas fa-project-diagram text-6xl text-gray-400 mb-4\'></i><p class=\'text-gray-500\'>Workflow diagram will be displayed here<br><small>{{ algorithm.workflow_image }}</small></p></div>'">

            <!-- Action Buttons -->
            <div class="mt-6 flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4">
              <!-- View Full Size Button -->
              <button onclick="openImageModal('{{ image_path }}')"
                      class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 bg-white hover:bg-gray-100 text-gray-800 font-medium rounded-lg border border-gray-300 shadow-sm transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                <i class="fas fa-expand-arrows-alt mr-2 text-sm"></i>
                <span class="text-sm sm:text-base">View Full Size</span>
              </button>

              <!-- Download Image Button -->
              <a href="{{ image_path }}"
                 download="{{ algorithm.workflow_image }}"
                 class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-medium rounded-lg shadow-sm transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                <i class="fas fa-download mr-2 text-sm"></i>
                <span class="text-sm sm:text-base">Download Image</span>
              </a>
            </div>
          {% else %}
            <div class="workflow-placeholder">
              <i class="fas fa-project-diagram text-6xl text-gray-400 mb-4"></i>
              <p class="text-gray-500">Workflow diagram will be displayed here</p>
            </div>
          {% endif %}
        </div>

        <!-- Figure Caption -->
        <div class="mt-8 text-center">
          <p class="text-sm text-gray-700 italic max-w-4xl mx-auto leading-relaxed text-justify">
            <strong>Figure 1:</strong> {{ algorithm.figure_caption }}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Methodology Section -->
<section id="methodology" class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        <span class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full mb-6 mr-4">
          <i class="fas fa-cogs text-3xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"></i>
        </span>
        Methodology & Approach
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed">
        Detailed breakdown of our multi-stage deep learning approach
      </p>
    </div>

    <!-- Methodology Steps -->
    <div class="grid md:grid-cols-2 gap-8 mb-16">
      {% for stage in algorithm.methodology %}
        <div class="bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 hover:border-blue-200 transform hover:scale-105">
          <!-- Stage Header -->
          <div class="mb-6">
            <div class="flex items-center mb-4">
              {% set stage_number = loop.index %}
              <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center font-bold text-lg mr-4">
                {{ stage_number }}
              </div>
              <h3 class="text-xl font-bold text-gray-900">{{ stage.title }}</h3>
            </div>
          </div>
          <!-- Stage Content -->
          <div class="space-y-3">
            {% for step in stage.steps %}
              <div class="flex items-start">
                <div class="flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></div>
                <p class="text-gray-700 leading-relaxed">{{ step }}</p>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Key Innovations Section -->
<section id="innovations" class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        <span class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-100 to-blue-100 rounded-full mb-6 mr-4">
          <i class="fas fa-lightbulb text-3xl bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent"></i>
        </span>
        Key Innovations
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed">
        Novel contributions and technological advances in our approach
      </p>
    </div>

    <div class="grid md:grid-cols-2 gap-8">
      {% for innovation in algorithm.key_innovations %}
        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8 border border-green-200 hover:border-green-300 transition-all duration-300 hover:shadow-lg transform hover:scale-105">
          <div class="flex items-start items-center">
            <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center mr-4">
              <i class="fas fa-star text-lg"></i>
            </div>
            <div>
              <p class="text-gray-800 font-medium leading-relaxed">{{ innovation }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Technical Architecture Section -->
<section class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        <span class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full mb-6 mr-4">
          <i class="fas fa-microchip text-3xl bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent"></i>
        </span>
        Technical Architecture
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed">
        Deep learning components and model architecture details
      </p>
    </div>

    <div class="grid lg:grid-cols-3 gap-8">
      <!-- Feature Extraction -->
      <div class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100">
        <div class="text-center mb-6">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-eye text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900">Feature Extraction</h3>
        </div>
        <div class="space-y-4">
          {% for item in algorithm.technical_architecture.feature_extraction %}
            <div class="bg-blue-50 rounded-lg p-4">
              <h4 class="font-semibold text-blue-800 mb-2">{{ item.name }}</h4>
              <p class="text-sm text-blue-700">{{ item.description }}</p>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Feature Selection -->
      <div class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100">
        <div class="text-center mb-6">
          <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-filter text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900">Feature Selection</h3>
        </div>
        <div class="space-y-4">
          {% for item in algorithm.technical_architecture.feature_selection %}
            <div class="bg-purple-50 rounded-lg p-4">
              <h4 class="font-semibold text-purple-800 mb-2">{{ item.name }}</h4>
              <p class="text-sm text-purple-700">{{ item.description }}</p>
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- Classification -->
      <div class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100">
        <div class="text-center mb-6">
          <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 text-white rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-brain text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900">Classification</h3>
        </div>
        <div class="space-y-4">
          {% for item in algorithm.technical_architecture.classification %}
            <div class="bg-green-50 rounded-lg p-4">
              <h4 class="font-semibold text-green-800 mb-2">{{ item.name }}</h4>
              <p class="text-sm text-green-700">{{ item.description }}</p>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

<!--  Key Innovations -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

        <!-- Section Title -->
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-16 text-center">
            <span class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full mb-6 mr-4">
                <i class="fas fa-microscope text-3xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"></i>
            </span>
            Model Performance Metrics
        </h2>

        <!-- Main 3 Metrics Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center mb-12">
            <!-- Accuracy Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-2xl p-8 border border-indigo-200 shadow-sm hover:shadow-md transition-shadow duration-300">
                <div class="text-3xl md:text-4xl font-bold text-indigo-600 mb-3">
                    {{ "%.2f"|format(performance.accuracy * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">Accuracy</div>
                <div class="text-sm text-indigo-700 bg-indigo-200 px-3 py-1 rounded-full inline-block">
                    Overall Correctness
                </div>
            </div>

            <!-- Sensitivity Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-pink-50 to-pink-100 rounded-2xl p-8 border border-pink-200 shadow-sm hover:shadow-md transition-shadow duration-300" style="animation-delay: 0.1s;">
                <div class="text-3xl md:text-4xl font-bold text-pink-600 mb-3">
                    {{ "%.2f"|format(performance.sensitivity * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">Sensitivity</div>
                <div class="text-sm text-pink-700 bg-pink-200 px-3 py-1 rounded-full inline-block">
                    True Positive Rate
                </div>
            </div>

            <!-- AUC Score Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-2xl p-8 border border-yellow-200 shadow-sm hover:shadow-md transition-shadow duration-300" style="animation-delay: 0.2s;">
                <div class="text-3xl md:text-4xl font-bold text-yellow-600 mb-3">
                    {{ "%.2f"|format(performance.auc * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">AUC Score</div>
                <div class="text-sm text-yellow-700 bg-yellow-200 px-3 py-1 rounded-full inline-block">
                    Area Under Curve
                </div>
            </div>
        </div>

        <!-- Additional Metrics Grid - Simple Card Style with Animation -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
            <!-- Precision Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-8 border border-blue-200 shadow-sm hover:shadow-md transition-shadow duration-300">
                <div class="text-3xl md:text-4xl font-bold text-blue-600 mb-3">
                    {{ "%.2f"|format(performance.precision * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">Precision</div>
                <div class="text-sm text-blue-700 bg-blue-200 px-3 py-1 rounded-full inline-block">
                    Positive Predictive Value
                </div>
            </div>

            <!-- Specificity Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-8 border border-green-200 shadow-sm hover:shadow-md transition-shadow duration-300" style="animation-delay: 0.1s;">
                <div class="text-3xl md:text-4xl font-bold text-green-600 mb-3">
                    {{ "%.2f"|format(performance.specificity * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">Specificity</div>
                <div class="text-sm text-green-700 bg-green-200 px-3 py-1 rounded-full inline-block">
                    True Negative Rate
                </div>
            </div>

            <!-- F1-Score Card -->
            <div class="animate-bounce-gentle bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-8 border border-purple-200 shadow-sm hover:shadow-md transition-shadow duration-300" style="animation-delay: 0.2s;">
                <div class="text-3xl md:text-4xl font-bold text-purple-600 mb-3">
                    {{ "%.2f"|format(performance.f1_score * 100) }}%
                </div>
                <div class="text-gray-800 font-semibold text-lg mb-2">F1-Score</div>
                <div class="text-sm text-purple-700 bg-purple-200 px-3 py-1 rounded-full inline-block">
                    Harmonic Mean
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="py-20 bg-gradient-to-br from-blue-600 to-purple-600">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
            Experience Our Algorithm in Action
        </h2>
        <p class="text-xl text-blue-100 mb-8 leading-relaxed">
            Test our multi-stage deep learning approach with your own medical images or explore our sample dataset
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/home#upload-section" class="inline-flex items-center px-8 py-4 bg-white text-blue-600 font-bold rounded-xl hover:bg-gray-50 transition-all duration-300 transform hover:scale-105 shadow-lg">
                <i class="fas fa-upload mr-3"></i>
                Test Algorithm
            </a>
            <a href="/researchers" class="inline-flex items-center px-8 py-4 bg-blue-500 text-white font-bold rounded-xl hover:bg-blue-400 transition-all duration-300 transform hover:scale-105 shadow-lg">
                <i class="fas fa-users mr-3"></i>
                Meet the Team
            </a>
        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
{% endblock %}